<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Buildatory : Admin</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    </h:head>
    <h:body  style=" background: black"> 
        <p:dialog id="dialog" header="Détail de la commande :"  modal="true"  widgetVar="dlg1"  height="200" width="95%" style="z-index: 1">
            <h:form id="form">
                <p:dataTable id="dt" value="#{CommandeControl.getSelectedCommande()}" var="item" scrollable="true" lazy="false" scrollWidth="200%" scrollHeight="100%" style="margin-top:20px; margin-bottom: 20px">
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Id Commande"/>
                        </f:facet>
                        <h:outputText value="#{CommandeControl.selectedCommande.idCommande}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Date Commande"/>
                        </f:facet>
                        <h:outputText value="#{item.dateCommande}">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputText>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Cpu"/>
                        </f:facet>
                        <h:outputText value="#{item.nomCpu}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Carte mère"/>
                        </f:facet>
                        <h:outputText value="#{item.nomCm}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Carte graphique"/>
                        </f:facet>
                        <h:outputText value="#{item.nomCg}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Ram"/>
                        </f:facet>
                        <h:outputText value="#{item.nomRam}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Stockage"/>
                        </f:facet>
                        <h:outputText value="#{item.nomStockage}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Cooling"/>
                        </f:facet>
                        <h:outputText value="#{item.nomCooling}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Boitier"/>
                        </f:facet>
                        <h:outputText value="#{item.nomBoitier}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Alimentation"/>
                        </f:facet>
                        <h:outputText value="#{item.nomAlim}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Nom"/>
                        </f:facet>
                        <h:outputText value="#{item.nomU}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Prénom"/>
                        </f:facet>
                        <h:outputText value="#{item.prenomU}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Télephone"/>
                        </f:facet>
                        <h:outputText value="#{item.telephoneU}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Mail"/>
                        </f:facet>
                        <h:outputText value="#{item.mailU}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Adresse"/>
                        </f:facet>
                        <h:outputText value="#{item.adresseU}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Prix Total"/>
                        </f:facet>
                        <h:outputText value="#{item.prixTotal}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>  
        <p:layout id="Layout" fullPage="true">
            <p:layoutUnit position="center" >
                <p:graphicImage value="resources/images/Banner.jpg" alt="Banniere" title="Banniere" style="width:100%; height:100px;" />
                <p:separator />
                <h3 style="margin-left: 30px; margin-top: 25px">Statistiques :</h3>
                <h:panelGrid columns="2" columnClasses="left,right" style="margin-left: 6%; width: 80%">
                    <p:chart type="line" model="#{chartView.animatedModel1}" style="width:500px;" />
                    <p:chart type="bar" model="#{chartView.animatedModel2}" style="width:500px; margin-left: 10%" />
                </h:panelGrid>

                <h3 style="margin-left: 30px; margin-top: 50px">Commandes en cours :</h3>
                <h:form>

                    <p:dataTable value="#{CommandeControl.allCommande}" var="item1" style="width: 80%; margin-left: 8%">
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="IdCommande"/>
                            </f:facet>
                            <h:outputText value="#{item1.idCommande}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Montage"/>
                            </f:facet>
                            <h:outputText value="#{item1.montage}" style="margin-left: 40%"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Expedition"/>
                            </f:facet>
                            <h:outputText value="#{item1.expedition}" style="margin-left: 40%"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Est Monté"/>
                            </f:facet>
                            <p:commandButton id="zizi" actionListener="#{CommandeControl.updateMontage(item1.idCommande)}" value="#{CommandeControl.getMontageToString_ADM(item1.montage)}" disabled="#{CommandeControl.disableButtonMontage(item1.idCommande)}" update="j_idt61:j_idt62:0:zizi j_idt61:j_idt62:0:zizi1" style="margin-left: 15%"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Est Expédié"/>
                            </f:facet>
                            <p:commandButton id="zizi1" actionListener="#{CommandeControl.updateExpe(item1.idCommande)}" value="#{CommandeControl.getLivraisonToString_ADM(item1.expedition)}" disabled="#{CommandeControl.disableButtonExpedie(item1.idCommande)}" update="j_idt61:j_idt62:0:zizi j_idt61:j_idt62:0:zizi1" style="margin-left: auto"/>
                        </p:column>

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Détails"/>
                            </f:facet>  
                            <p:commandButton value="Voir" actionListener="#{CommandeControl.setSelectedCommande(item1)}" oncomplete="PF('dlg1').show();" update=":dialog" style="margin-left: 35%">
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>

                </h:form>
            </p:layoutUnit>
            <p:layoutUnit position="south" style="overflow:hidden">
                <p:button outcome="Welcome" value="Accueil" style="margin-left: 40%; font-size:10px"/>
            </p:layoutUnit>
        </p:layout> 
    </h:body>
</html>

